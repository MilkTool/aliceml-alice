import structure TextIO from "x-alice:TextIO.dll"
import val IntFromString from "x-alice:Helper.dll"
import
  val inspect
  val makeBasicType
  val makeListType
from "x-alice:Canvas.dll"

open TextIO
open Promise

fun main() =
  let
    val p  = promise()
    val f  = future(p)
    val ty = makeBasicType("int")
  in
    inspect(f, ty);
    loop (p)
  end
and loop(p) = (
  print("> ");
  case inputLine(stdIn)
  of ""  => ()
  | "\n" => loop(p)
  | s    => let
              val p' = promise();
            in
              fulfill(p, IntFromString(s))
            end)

val _ = main()
