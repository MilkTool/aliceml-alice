#!/bin/sh

howcalled=$0

if test -z "${STOCKHOME}"
then
  dir=`dirname $howcalled`
  STOCKHOME=`(cd $dir; cd ..; /bin/pwd)`
fi

: ${OZHOME=/opt/mozart-devel}

case `uname` in
    CYGWIN*)
	: ${OZ_LOAD=prefix=/=c:/cygwin/\;cache=$OZHOME/cache/}
	SEP=\;
	;;
    *)
	: ${OZ_LOAD=cache=$OZHOME/cache/}
	SEP=:
	;;
esac

ALICE_LOAD=pattern=x-oz:'?{x}'=x-oz\\:'?{x}'${SEP}pattern='?{x}'='?{x}.ozf'${SEP}pattern='?{x}'='?{x}'${SEP}pattern=x-alice:/'?{x}'=$STOCKHOME/'?{x}'.ozf${SEP}pattern=x-alice:/'?{x}'=$STOCKHOME/'?{x}'

OZ_LOAD=$ALICE_LOAD${SEP}$OZ_LOAD

PATH=$OZHOME/bin:$STOCKHOME/bin:$PATH
export STOCKHOME PATH OZ_LOAD ALICE_LOAD

exec ozengine x-alice:/VMMain "$@"
