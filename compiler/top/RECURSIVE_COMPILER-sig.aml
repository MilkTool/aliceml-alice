(*
 * Author:
 *   Leif Kornstaedt <kornstae@ps.uni-sb.de>
 *
 * Copyright:
 *   Leif Kornstaedt, 2001
 *
 * Last change:
 *   $Date$ by $Author$
 *   $Revision$
 *)

import
    structure Url
from "../../lib/utility/Url"

import
    structure Source
from "../infrastructure/Source"

import
    signature SWITCHES
from "../infrastructure/SWITCHES-sig"

import
    signature COMPOSER
from "../infrastructure/COMPOSER-sig"

import
    signature TARGET
from "../infrastructure/TARGET-sig"

signature RECURSIVE_COMPILER =
    sig
	structure Composer: COMPOSER
	structure Switches: SWITCHES
	structure Target: TARGET

	exception Error

	type context
	val empty: context

	val extension: string

	val compileSign: string -> Composer.Sig.t
	val compileFileToFile: string * string -> Composer.Sig.t
	val acquireSign: Source.desc * Url.t -> Composer.Sig.t

	val compileFile: context -> string -> context * Target.t
	val compileString: context -> string -> context * Target.t

	(*DEBUG*)
	val processFile: (Source.desc * string -> 'a) -> string -> 'a
	val processString: (Source.desc * string -> 'a) -> string -> 'a
    end
