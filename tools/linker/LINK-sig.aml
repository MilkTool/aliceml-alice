(*
 * Author:
 *   Leif Kornstaedt <kornstae@ps.uni-sb.de>
 *
 * Copyright:
 *   Leif Kornstaedt, 2002
 *
 * Last change:
 *   $Date$ by $Author$
 *   $Revision$
 *)

import signature IMP_MAP     from "../lib/utility/IMP_MAP-sig"
import structure Url         from "../lib/system/Url"
import structure Resolver    from "../lib/system/Resolver"
import structure MyComponent from "MyComponent"

signature LINK =
    sig
	structure UrlMap: IMP_MAP

	datatype boundary =
	    INCLUDE of string
	  | EXCLUDE of string

	exception Empty
	exception Mismatch of Url.t * Url.t
	exception Conflict of Url.t
	exception Rewrite of Url.t * Url.t * Url.t
	exception Io of Url.t * exn

	val collect: boundary vector * bool -> Url.t ->
		     {componentMap: MyComponent.t UrlMap.t,
		      includeMap: Url.t vector UrlMap.t,
		      excludeMap: MyComponent.inf UrlMap.t}
		     (* Empty, Mismatch, Conflict, Io *)

	val sort: Url.t vector UrlMap.t * 'a UrlMap.t -> Url.t list list

	val rewrite: Resolver.Handler.t list -> Url.t -> Url.t
	    (* Option.Option *)

	val link: {root: Url.t,
		   verbose: bool,
		   typeCheck: bool,
		   boundary: boundary vector,
		   rewrite: Resolver.Handler.t list} -> MyComponent.t
		     (* Empty, Mismatch, Conflict, Rewrite, Io *)
    end
