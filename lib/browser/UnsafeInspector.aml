(*
 * Authors:
 *   Bernadette Blum <blum@ps.uni-sb.de>
 *   Marvin Schiller <schiller@ps.uni-sb.de>
 *
 * Copyright:
 *   Bernadette Blum, 2002
 *   Marvin Schiller, 2002
 *
 * Last Change:
 *   $Date$ by $Author$
 *   $Revision$
 *
 *)

import structure Types from "Types"
import structure NewNode from "NewNode"
import structure Layout from "Layout"
import structure WindowManager from "WindowManager"
import structure DrawNodes from "DrawNodes"
import structure Settings from "Settings"
import structure WindowHelper from "WindowHelper"
import structure Init from "Init"
import signature UNSAFE_INSPECTOR from "UNSAFE_INSPECTOR-sig"

structure UnsafeInspector :> UNSAFE_INSPECTOR = 
struct
    	       
    (* inspect *)
    fun inspect (v,t) = 
	let 
	    val n = NewNode.newNode(v,t)
	in
	    ( Layout.layout(n)
	     ;  DrawNodes.draw(n,0,
			       !WindowManager.act_line
			       ,DrawNodes.groupToPosition)
	     ; WindowManager.incr_act_line
	     (Layout.get_ydim(n) + 1)
	     ; Layout.setVisible(Layout.get_xdim(n),Layout.get_ydim(n)+1)
	     ; (!WindowManager.resize())
	     ; (!WindowManager.show) () )
	end
    
    (* inspectInf *)
    and inspectInf (v,t) = 
	let val n = NewNode.newNodeInf(v,t)
	in  ( Layout.layout(n)
	     ;  DrawNodes.draw(n,0,!WindowManager.act_line
			       , DrawNodes.groupToPosition)
	     ; WindowManager.incr_act_line
	     (Layout.get_ydim(n) + 1)
	     ; Layout.setVisible(Layout.get_xdim(n),Layout.get_ydim(n)+1)
	     ; (!WindowManager.resize())
	     ; (!WindowManager.show) () )
	end 

    and set_width w = Settings.max_width := w

    and set_depth d = Settings.max_depth := d
	
    and set_relmode b = Settings.relmode := b

    and set_tokenmode b = Settings.tokenmode := b

    val _  = Init.init ()

end
