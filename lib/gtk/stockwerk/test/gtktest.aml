import structure Gtk from "../Gtk"
import structure Gdk from "../Gdk"


local
  open Gtk

  fun arrayFromList xs =
  let
      val a = Array.array(length xs, hd xs)
      fun put n nil = ()
	| put n (l::ls) = ( Array.update(a,n,l) ; put (n+1) ls )
  in
      ( put 0 xs ; a )
  end

  val myPixmap = [
"48 48 10 2",
"       c #410341034103",
".      c #FFFFFFFFFFFF",
"X      c #965886178617",
"o      c #9E7986178617",
"O      c #965882078617",
"+      c #9E7982078617",
"@      c #96587DF779E7",
"#      c #965879E779E7",
"$      c #8E3879E779E7",
"%      c #8E3875D671C6",
"                                                                                              . ",
"  X X o O + + + @ # # # $ % & X X X X X X X X X X X X X X X o o o o o o o o o o o o O O O + + + ",
"  X o o + + + + @ # # $ % & 4 = ; : 5 6 6 6 6 6 6 7 7 7 7 > 7 7 7 7 7 7 8 8 8 8 2 9 8 8 8 8 8 . ",
"  o o o + + + @ @ # # $ & 0 * - : 6 6 6 q q 7 q q w q w e 7 e w w w w e e r 8 > 9 9 8 8 8 8 r . ",
"  o o o o + + + @ t # # & * = - ; 6 6 q q q q q w q w q q w 7 7 7 > > 2 2 2 2 3 3 3 2 2 2 2 2 . ",
"  y o o + o o u @ t # t & 1 = - : 6 q q q q q w q q q w w w e 8 > 2 , , 3 3 , 3 i i < 3 3 3 < . ",
"  o p p p p p u a @ # # & 1 = - ; : 6 6 7 7 6 6 6 7 6 > 6 8 > 8 > , , 3 3 < s s s s s i s < d . ",
"  f o f p p u p a t # $ 0 * = - : : : > 6 > , , > > > 2 2 > > > 2 , , 3 3 s i s 3 < i g i i h . ",
"  y f p p p u u a t # % & d 1 - : : : : > : : : > > > > > > 2 > 2 , , , 2 3 s s 3 < i d i d h . ",
"  f p p p u u j a t # % % 0 * - : : : > > > , > > > 8 > 8 > > > 2 , 3 2 9 2 3 3 3 < i i d d h . ",
"  f f p p u u j a t # % % 0 d - : : : > > : > > > 8 8 8 8 8 8 8 8 2 2 9 9 2 3 3 < i i d d 0 h . ",
"  f f p p u u j j j t k % 0 d - : - - : 7 > > > 8 8 8 7 8 8 e w l e r 8 8 8 2 3 1 i d d h h % . ",
"  f z p p p u u u j t k % h * - : , - > 7 7 > 8 7 e e e e e w w w l l r 8 8 8 , 1 i d d 0 h % . ",
"  z z z z x x u j j t # h d 1 - : , , > 8 7 e e w w w c w w c c v v v w w w e > > , 1 * d 0 & . ",
"  z b b z z x x j n t k 0 1 < - , > > > > 7 w w c c v m v v v v v m m m c w e 7 7 : - 1 * * 0 . ",
"  b z z z x x x j n t k 0 1 , , > > 7 8 7 e w c c c w w e r e l w m m c M M N N q 6 : ; = = 4 . ",
"  b b z x x x x j n B k d , : 2 > 8 7 e e w M c c c l r 2 3 2 9 r c c M w V M V N q 6 5 ; = C . ",
"  b b z z z x x n t k % d 1 - , : 8 7 e e w c c c w e 2 < Z s 3 8 w w 7 > 7 V q : ; 5 5 ; = C . ",
"  A S S D D D F n # % d d d d < , > 7 e w w c c c w 8 3 g B g i , 7 e - d : V ; 0 0 ; 5 G G C . ",
"  A S S S D x F t k h d d h d < 3 > 8 e w w c c w w 8 3 g B H g < 7 7 < 0 : q = 0 & C C C C J . ",
"  A S S S D u K k h 0 d d h d d 1 , 8 8 8 l w w w l 8 2 i k k k i 7 q > - : 5 ; * 4 & L 4 J J . ",
"  A S S S D P n k h g d g h g d i 3 2 2 2 r w w l l r 9 i H k k 0 > 6 6 : ; - ; = 4 L X I U J . ",
"  A A S S D P n k k k k k k h h g i < i d s , 2 9 9 9 2 < 1 i d d 1 = = = * * 4 C 4 L O I U Y . ",
"  T A A R D P n t # B B B k k h g g i H B H g i 3 3 , , , , , - 1 0 % 0 0 0 & 4 J 4 L L I Y Y . ",
"  T A D E F K n n t W t k k % H H h g H B k H h g g i i i d d d 0 % % % & $ $ I I $ Q O Q Q ! . ",
"  T R E P n n n n K n B k h h k k H g H B B B B t t k h % k % h % % $ $ $ $ L L O O X ! ! ~ ~ . ",
"  A R E P K K K K K n B b ^ / / / ^ ^ B B u ( ( ) ) ) ) ) ) ) ) ^ _ O @ O + ` ` ` ' ' ] [ { { . ",
"  A R D } P K K K K K K |  .........X.Z n o.O. . . . . . . . .+.+.@.+ f y [ +.+.+.+.+.` { ^ ^ . ",
"  R A #.$.} P K P %.K &.K *.=.-.-.$ ;.;.K P n :.-.3 >.>.O ,.-.<.> 2 d { b { ^ 1.,.1.- - y ) 2.. ",
"m A R R R #.} %.%.%.%.&.&.&.o.-.-.=.3.K P F 4.+.o 5.F D _  .,.,.i A A 6.6./ 7.8.+.0 O 7.2.2.7.. ",
"  A 9.9.9.0.$.$.%.%.%.%.&.&.&.q.-.-.k P %.w.e.p 5.W D D z +.,.,.2 6./ / ( ( :.8.] 1 ) r.7.7.t.. ",
"m 9.9.0.#.$.y.} %.&.&.%.%.&.%.u.-.-.<.i.p.8.f 5.t D #.R S ..,.,.y T ( ( o.r.a.-.1 b r.s.s.s.d.. ",
"  9.f.0.$.$.y.y.%.K &.%.&.&.&.%...-.-.6.e.=.g.n D D R R A 4.X.X.y x h.o.r.j.8.^ h d.d.d.k.l.l.. ",
"  9.f.0.#.$.$.y.%.%.&.y.y.&.&.%.l.-.-.-.| g.Z #.#.R R A A w. .,.z.z o.o.r.a.-.1 b d.d.k.k.k.l.. ",
"  9.9.0.0.#.$.y.&.%.y.x.y.y.%.P z ..-.-.c.Z #.0.R R A A T l.O. .z.# o.r.v.8.~ & s.s.k.k.d.k.b.. ",
"  9.f.0.0.#.x.x.y.y.y.x.y.y.&.} r.e.X.-.{ $.0.0.9.A A / 9.d.+.,.v.# r.l.a.v.* ^ s.d.k.l.b.l.n.. ",
"  9.f.9.0.0.m.m.x.x.y.M.M.&.$.N.8.B.-.-.:.n 9.9.9.f.9.( h.V.8.X. .d r...8.X # d.k.k.l.l.n.n.C.. ",
"  f.f.Z.0.0.0.m.x.x.M.x.y.y.0.O.A.S.@.X.X.f 9.9.f.f.f.h.h.V.O.X.X.O l.a.v.d ( k.D.l.l.b.n.C.F.. ",
"  N.G.f.Z.Z.m.x.x.&.x.x.x.0.A.e.t *.u...X.@.F f.f.N.N.N.V.H.B. .X.b -.8.X @ l.D.b.b.n.n.C.J.J.. ",
"  K.G.G.L.Z.m.x.&.&.x.m.0.A.e.p P.} 0.-.X.X.p f.N.N.V.V.V.H.j.+. .=.8.=.d r.b.b.n.n.n.C.F.J.J.. ",
"  K.I.G.Z.U.x.x.y.y.$.x.j.e.o P.K 0.0.n.X.X.=.R N.V.V.V.H.u.F.+. . .+.# b D.l.b.n.n.F.F.J.J.J.. ",
"  Y.K.L.U.U.m.x.y.y.y.j.e.=.9 n 0.0.9.9.+.X.X.u V.V.V.H.u.u.n.8. . .' h d.l.l.n.n.C.J.J.J.p.w.. ",
"  Y.I.L.L.Z.U.m.x.y.$.8...-...T.9.9.q.8.8.X.X.X.8.Y.H.u.u.u.T.8. . .# b b.n.n.n.C.C.J.J.J.p.p.. ",
"  K.R.R.R.L.U.m.$.$.$.T.+ + o Z P f.T.6.f f [ b [ i u.u.u.T.T.p.] y h D.n.n.n.C.C.J.J.J.p.p.w.. ",
"  K.L.L.L.Z.U.0.#.$.#.0.K j P P R f.f.R D D S S S A u.u.T.T.D.D.( ( u.n.n.F.C.C.J.J.p.p.p.j.j.. ",
"  K.Z.Z.U.U.U.U.m.#.#.#.R S A 9.f.f.h.N.V.V.H.H.u.u.u.T.D.D.D.D.b.b.n.n.n.F.J.J.J.J.p.p.j.j.j.. ",
"  K.Z.Z.U.U.Z.Z.0.0.0.R R S A T f.h.h.h.V.H.H.u.u.T.T.T.D.D.b.b.b.n.n.F.F.F.J.J.p.p.w.p.j.j.j.. ",
". . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . "
]

in
  (*val _ = widgetShow (colorSelectionDialogNew "Farbe auswaehlen...")*)

  val w = windowNew WINDOW_TOPLEVEL
  val _ = windowSetTitle(w, "Hallo Welt!")
  val _ = containerSetBorderWidth(w,10)

  val gdkpic = Gdk.pixbufNewFromXpmData(arrayFromList myPixmap)
  val i = imageNewFromPixbuf(gdkpic)

  val b = buttonNewWithLabel "Test"

  val tb = textBufferNew NULL
  val tv = textViewNewWithBuffer tb

  val c = comboNew()
  val _ = comboSetPopdownStrings(c, ["Auswahl 1", "Auswahl 2"])


  val box = vboxNew(false,0)

  val _ = ( boxPackStart(box,b ,false,false,0) ;
	    boxPackStart(box,tv,false,false,0) ;
	    boxPackStart(box,c ,false,false,0) ;
	    boxPackStart(box,i ,false,false,0) ;
	    containerAdd (w,box) ;
 	    widgetShowAll w )
      
  fun cb (widget, arglist) = ( print "callback function called !!!\n" )

  val s1 = signalConnectAfter(b,"clicked",cb)
  val s2 = signalConnect(tb,"insert_text",cb)

end
