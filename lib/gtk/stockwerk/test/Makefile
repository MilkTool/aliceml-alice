MORE = -I ~/devel/stockhausen/install/include
CC = gcc `pkg-config --cflags --libs gtk+-2.0 libgnomecanvas-2.0` $(MORE)

ALICEC = alicec --dump-phases
ALICEDEP = alicedep
ALICERUN = alicerun

.PHONY: run all

all: gtktest.stc
	$(ALICERUN) gtktest

%: %.cc
	$(CC) $< -o $@

%.stc: %.aml
	$(ALICEC) -c $< -o $@

depend: Makefile *.cc *.aml
	$(CC) -M *.cc > Makefile.depend
	$(ALICEDEP) *.aml >> Makefile.depend

-include Makefile.depend

clean:
	rm -f *.o
	rm -f *.stc
	rm -f test valisttest
