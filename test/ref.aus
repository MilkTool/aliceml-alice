fun !(ref x) = x

fun counter () =
    let
	val state = ref 0
    in
	fn () =>
	let
	    val n = !state
	in
	    state := n + 1;
	    n
	end
    end

val c = counter ()

; builtin "System.show" (c (), c (), c ()) ;
