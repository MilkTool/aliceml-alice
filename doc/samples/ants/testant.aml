import "Ante"
import "Instructions"
open Ante

val ant =

 label "start" ++
    sense ahead food onyes (
	move onno (goto "start") ++
	pick onno (goto "start") ++

 label "sense" ++
	sense ahead home onyes (
	    move onno (goto "sense") ++
	    drop () ++
	    goto "start"
	) onno (

 label "loop1" ++
	    flipn [
		turn left ++
		goto "sense"
	    ,
		turn right ++
		goto "sense"
	    ,
		move2 onyes (goto "sense") onno (goto "loop1")
	    ]
	)
    ) onno (

 label "loop2" ++
	flipn [
	    turn left ++
	    goto "start"
	,
	    turn right ++
	    goto "start"
	,
	    move2 onyes (goto "start") onno (goto "loop2")
	]
    )

val _ = Instructions.output ignore (TextIO.stdOut, compile ant)
